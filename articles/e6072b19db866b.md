---
title: "NOT NULL制約・DEFAULT制約・UNIQUE制約"
emoji: "📘"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: [Rails]
published: false
---

# NOT NULL制約とは
NOT NULL＝空のカラムを禁止する制約

NOT NULL制約はデータベースに保存するときに空のまま保存することを禁止します。  
つまり、何かしらの値が入っているかどうかを検証してくれる役割を持っています。  
投稿する際などに、フォームの中が空の状態で投稿できてしまうとダメな場合に設定していると便利です。  
空（NULL）を禁止する場合には「:null => false」をオプションに指定します。  
「:null => false」はテーブルに記述


  
下記のバリデーションも、指定した属性（:カラム名）が存在しているかどうかを確認します。  
以下の記述はモデルに記述。
```
validates :カラム名, presence:true
```
### Not Null制約とバリデーションの違い

「Not Null制約」とバリデーション「presence: true」の違いは、空文字（””）が許可されるかされないかの違いになります。  
「Not Null制約」では空文字は許可される一方で、  
バリデーションの「presence: true」では空文字は許可されません。  
:::: details nullも空文字も弾きたい場合はどのように記述すれば良い？ 
::: message
結論、以下の3点を記述することが理想形となります。  
- フォームに「required: true」
- モデルに「presence: true」
- テーブルに「null: false」  
:::message
「required :true」を使用することで、空文字での送信を防ぐことができます。  
:::
:::
::::

  
    
# DEFAULT制約とは
DEFAULT = データの初期値を設定する機能  
初期値を設定しておく制約です。:default => ''を付けます。
DEFAULT制約を設定すると、そのカラムにデータが挿入されなかった場合に、デフォルトの値が自動的に代入されます。  
つまり、カラムがNULLのままである場合でも、デフォルト値がセットされるということです。


# UNIQUE制約
UNIQUE　= 一意性
UNIQUE制約は、他の行のカラムに同じデータが存在する場合、データ登録を行えないようにする制約です。  
たとえば、emailカラムのように、同じデータを重複して登録させたくない場合に設定します。  
```
validates :カラム名, uniqueness: true
```







