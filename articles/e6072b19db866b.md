---
title: "NOT NULLåˆ¶ç´„ãƒ»DEFAULTåˆ¶ç´„ãƒ»UNIQUEåˆ¶ç´„"
emoji: "ğŸ“˜"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [Rails]
published: false
---

# NOT NULLåˆ¶ç´„ã¨ã¯
NOT NULLï¼ç©ºã®ã‚«ãƒ©ãƒ ã‚’ç¦æ­¢ã™ã‚‹åˆ¶ç´„

NOT NULLåˆ¶ç´„ã¯ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¿å­˜ã™ã‚‹ã¨ãã«ç©ºã®ã¾ã¾ä¿å­˜ã™ã‚‹ã“ã¨ã‚’ç¦æ­¢ã—ã¾ã™ã€‚
ã¤ã¾ã‚Šã€ä½•ã‹ã—ã‚‰ã®å€¤ãŒå…¥ã£ã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’æ¤œè¨¼ã—ã¦ãã‚Œã‚‹å½¹å‰²ã‚’æŒã£ã¦ã„ã¾ã™ã€‚
æŠ•ç¨¿ã™ã‚‹éš›ãªã©ã«ã€ãƒ•ã‚©ãƒ¼ãƒ ã®ä¸­ãŒç©ºã®çŠ¶æ…‹ã§æŠ•ç¨¿ã§ãã¦ã—ã¾ã†ã¨ãƒ€ãƒ¡ãªå ´åˆã«è¨­å®šã—ã¦ã„ã‚‹ã¨ä¾¿åˆ©ã§ã™ã€‚
ç©ºï¼ˆNULLï¼‰ã‚’ç¦æ­¢ã™ã‚‹å ´åˆã«ã¯ã€Œ:null => falseã€ã‚’ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«æŒ‡å®šã—ã¾ã™ã€‚
ã€Œ:null => falseã€ã¯ãƒ†ãƒ¼ãƒ–ãƒ«ã«è¨˜è¿°



ä¸‹è¨˜ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚‚ã€æŒ‡å®šã—ãŸå±æ€§ï¼ˆ:ã‚«ãƒ©ãƒ åï¼‰ãŒå­˜åœ¨ã—ã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’ç¢ºèªã—ã¾ã™ã€‚
ä»¥ä¸‹ã®è¨˜è¿°ã¯ãƒ¢ãƒ‡ãƒ«ã«è¨˜è¿°ã€‚
```
validates :ã‚«ãƒ©ãƒ å, presence:true
```
### Not Nullåˆ¶ç´„ã¨ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã®é•ã„

ã€ŒNot Nullåˆ¶ç´„ã€ã¨ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã€Œpresence: trueã€ã®é•ã„ã¯ã€ç©ºæ–‡å­—ï¼ˆâ€â€ï¼‰ãŒè¨±å¯ã•ã‚Œã‚‹ã‹ã•ã‚Œãªã„ã‹ã®é•ã„ã«ãªã‚Šã¾ã™ã€‚
ã€ŒNot Nullåˆ¶ç´„ã€ã§ã¯ç©ºæ–‡å­—ã¯è¨±å¯ã•ã‚Œã‚‹ä¸€æ–¹ã§ã€
ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã®ã€Œpresence: trueã€ã§ã¯ç©ºæ–‡å­—ã¯è¨±å¯ã•ã‚Œã¾ã›ã‚“ã€‚
:::: details nullã‚‚ç©ºæ–‡å­—ã‚‚å¼¾ããŸã„å ´åˆã¯ã©ã®ã‚ˆã†ã«è¨˜è¿°ã™ã‚Œã°è‰¯ã„ï¼Ÿ
çµè«–ã€ä»¥ä¸‹ã®3ç‚¹ã‚’è¨˜è¿°ã™ã‚‹ã“ã¨ãŒç†æƒ³å½¢ã¨ãªã‚Šã¾ã™ã€‚
- ãƒ•ã‚©ãƒ¼ãƒ ã«ã€Œrequired: trueã€
- ãƒ¢ãƒ‡ãƒ«ã«ã€Œpresence: trueã€
- ãƒ†ãƒ¼ãƒ–ãƒ«ã«ã€Œnull: falseã€
:::message
ã€Œrequired :trueã€ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€ç©ºæ–‡å­—ã§ã®é€ä¿¡ã‚’é˜²ãã“ã¨ãŒã§ãã¾ã™ã€‚
:::
::::

# DEFAULTåˆ¶ç´„ã¨ã¯
DEFAULT = ãƒ‡ãƒ¼ã‚¿ã®åˆæœŸå€¤ã‚’è¨­å®šã™ã‚‹æ©Ÿèƒ½
åˆæœŸå€¤ã‚’è¨­å®šã—ã¦ãŠãåˆ¶ç´„ã§ã™ã€‚:default => ''ã‚’ä»˜ã‘ã¾ã™ã€‚
DEFAULTåˆ¶ç´„ã‚’è¨­å®šã™ã‚‹ã¨ã€ãã®ã‚«ãƒ©ãƒ ã«ãƒ‡ãƒ¼ã‚¿ãŒæŒ¿å…¥ã•ã‚Œãªã‹ã£ãŸå ´åˆã«ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®å€¤ãŒè‡ªå‹•çš„ã«ä»£å…¥ã•ã‚Œã¾ã™ã€‚
ã¤ã¾ã‚Šã€ã‚«ãƒ©ãƒ ãŒNULLã®ã¾ã¾ã§ã‚ã‚‹å ´åˆã§ã‚‚ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ãŒã‚»ãƒƒãƒˆã•ã‚Œã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã€‚


# UNIQUEåˆ¶ç´„
UNIQUEã€€= ä¸€æ„æ€§ï¼ˆé‡è¤‡ã‚’ç¦æ­¢ã™ã‚‹ï¼‰
UNIQUEåˆ¶ç´„ã¯ã€ä»–ã®è¡Œã®ã‚«ãƒ©ãƒ ã«åŒã˜ãƒ‡ãƒ¼ã‚¿ãŒå­˜åœ¨ã™ã‚‹å ´åˆã€ãƒ‡ãƒ¼ã‚¿ç™»éŒ²ã‚’è¡Œãˆãªã„ã‚ˆã†ã«ã™ã‚‹åˆ¶ç´„ã§ã™ã€‚
ãŸã¨ãˆã°ã€emailã‚«ãƒ©ãƒ ã®ã‚ˆã†ã«ã€åŒã˜ãƒ‡ãƒ¼ã‚¿ã‚’é‡è¤‡ã—ã¦ç™»éŒ²ã•ã›ãŸããªã„å ´åˆã«è¨­å®šã—ã¾ã™ã€‚
```
validates :ã‚«ãƒ©ãƒ å, uniqueness: true
```

# ãã®ä»–ã®åˆ¶ç´„ã®ç¨®é¡
## ä¸»ã‚­ãƒ¼åˆ¶ç´„
ä¸»ã‚­ãƒ¼åˆ¶ç´„ã¯ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãƒ†ãƒ¼ãƒ–ãƒ«å†…ã®ç‰¹å®šã®ã‚«ãƒ©ãƒ ã«é©ç”¨ã•ã‚Œã‚‹ãƒ«ãƒ¼ãƒ«ã§ã™ã€‚  
ã“ã®åˆ¶ç´„ã‚’è¨­å®šã™ã‚‹ã¨ã€ãã®ã‚«ãƒ©ãƒ ã«ã¯ä¸€æ„ã®å€¤ãŒè¨­å®šã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚  
ã¤ã¾ã‚Šã€åŒã˜å€¤ã®ãƒ‡ãƒ¼ã‚¿ãŒè¤‡æ•°å­˜åœ¨ã™ã‚‹ã“ã¨ã‚’è¨±ã—ã¾ã›ã‚“ã€‚
ä¾‹ï¼šidãªã©
â€» Railsã§ã¯ã€ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆã™ã‚‹éš›ã«idã‚«ãƒ©ãƒ ã«å…ƒã€…å®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™ã€‚

## å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„
IDãªã©ã®ã‚­ãƒ¼ã‚’åˆ©ç”¨ã—ã¦ãƒ†ãƒ¼ãƒ–ãƒ«ã¨ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’é–¢é€£ä»˜ã‘ã¦ã„ã‚‹ã¨ãã€
è¦ªå…ƒã®ãƒ†ãƒ¼ãƒ–ãƒ«ã«ãƒ‡ãƒ¼ã‚¿ãŒå­˜åœ¨ã—ã¦ã„ãªã‘ã‚Œã°ã„ã‘ãªã„ã¨ã„ã†åˆ¶ç´„ã§ã™ã€‚  
ä¾‹ãˆã°ã€userãƒ†ãƒ¼ãƒ–ãƒ«ã¨postãƒ†ãƒ¼ãƒ–ãƒ«ãŒã‚ã‚‹ã¨ã—ã¾ã™ã€‚  
userãƒ†ãƒ¼ãƒ–ãƒ«ã«ã¯userã®æƒ…å ±ãŒä¿å­˜ã•ã‚Œã¦ãŠã‚Šã€postãƒ†ãƒ¼ãƒ–ãƒ«ã«ã¯userãŒä½œæˆã—ãŸpostã®ãƒ‡ãƒ¼ã‚¿ãŒä¿å­˜ã•ã‚Œã¦ã„ã¾ã™ã€‚
ã“ã®å ´åˆã€user_idãŒuserãƒ†ãƒ¼ãƒ–ãƒ«ã®ä¸»ã‚­ãƒ¼ã§ã‚ã‚Šã€postãƒ†ãƒ¼ãƒ–ãƒ«ã«ã‚‚ãã‚Œã‚’å¤–éƒ¨ã‚­ãƒ¼ã¨ã—ã¦å‚ç…§ã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚  
ã¤ã¾ã‚Šã€postãƒ†ãƒ¼ãƒ–ãƒ«ã«ä¿å­˜ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã¯ã€usetãƒ†ãƒ¼ãƒ–ãƒ«ã®idã«å­˜åœ¨ã™ã‚‹å€¤ã®ã¿ãŒè¨±å¯ã•ã‚Œã‚‹ã¨ã„ã†åˆ¶ç´„ã‚’è¨­ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚  
ã“ã®åˆ¶ç´„ã«ã‚ˆã‚Šã€é–“é•ã£ãŸãƒ‡ãƒ¼ã‚¿ãŒpostãƒ†ãƒ¼ãƒ–ãƒ«ã«ä¿å­˜ã•ã‚Œã‚‹ã“ã¨ã‚’é˜²ãã“ã¨ãŒã§ãã¾ã™ã€‚ä¾‹ãˆã°ã€å­˜åœ¨ã—ãªã„user_idã‚’æŒã¤postãŒä½œæˆã•ã‚Œã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚  
ã“ã®ã‚ˆã†ã«å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§ã€é–¢é€£ã™ã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«é–“ã§ãƒ‡ãƒ¼ã‚¿ã®æ•´åˆæ€§ã‚’ç¢ºä¿ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
```
t.references :ã‚«ãƒ©ãƒ å, foreign_key: true
```

>`foreign_key: true` ã¯ã€ã“ã®å¤–éƒ¨ã‚­ãƒ¼ã‚«ãƒ©ãƒ ã«å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„ã‚’é©ç”¨ã™ã‚‹ãŸã‚ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã™ã€‚å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„ã¯ã€é–¢é€£ã™ã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«ã®å€¤ãŒå­˜åœ¨ã™ã‚‹ã‹ã©ã†ã‹ã‚’ç¢ºèªã—ã¾ã™ã€‚
>ã¤ã¾ã‚Šã€å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€é–¢é€£ã™ã‚‹ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒå­˜åœ¨ã—ãªã„å¤–éƒ¨ã‚­ãƒ¼å€¤ã‚’æŒã¤ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒã§ããªããªã‚Šã¾ã™ã€‚

>`t.references`å‘½ä»¤ã¯ã€ãƒ†ãƒ¼ãƒ–ãƒ«å†…ã«å¤–éƒ¨ã‚­ãƒ¼ã‚«ãƒ©ãƒ ã‚’ä½œæˆã™ã‚‹ãŸã‚ã®ä¾¿åˆ©ãªã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã§ã™ã€‚  
>ã“ã®å‘½ä»¤ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€å¤–éƒ¨ã‚­ãƒ¼ã‚«ãƒ©ãƒ ã¨ã—ã¦å‘½åã•ã‚ŒãŸã‚«ãƒ©ãƒ ãŒè‡ªå‹•çš„ã«ç”Ÿæˆã•ã‚Œã¾ã™ã€‚
-----
å‚è€ƒï¼š
https://qiita.com/oteko7/items/2b03fa13d2f1c91e67e2
https://techtechmedia.com/notnull-validation-difference/









